using System;
using Newtonsoft.Json.Linq;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using Microsoft.AspNetCore.Mvc;
using Orleans;
using Orleans.Hosting;
using OrleansClient;

namespace webapi.Controllers
{
    // [Route("api/[controller]")]
    public class ResourcesController : Controller
    {
        [Route("api/resources/operator-metadata")]
        public IActionResult OperatorMetadata()
        {
            string ret = "{\"operators\": [ { \"operatorType\": \"ScanSource\", \"jsonSchema\": { \"type\": \"object\", \"id\": \"urn:jsonschema:edu:uci:ics:texera:dataflow:source:scan:ScanSourcePredicate\", \"properties\": { \"tableName\": { \"type\": \"string\" } }, \"required\": [ \"tableName\" ] }, \"additionalMetadata\": { \"userFriendlyName\": \"Source: Scan\", \"operatorDescription\": \"Read records from a table one by one\", \"operatorGroupName\": \"Source\", \"numInputPorts\": 0, \"numOutputPorts\": 1, \"advancedOptions\": [] } }, { \"operatorType\": \"Comparison\", \"jsonSchema\": { \"type\": \"object\", \"id\": \"urn:jsonschema:edu:uci:ics:texera:dataflow:comparablematcher:ComparablePredicate\", \"properties\": { \"attributeName\": { \"type\": \"string\" },\"attributeType\": { \"type\": \"string\",\"enum\": [ \"int\",\"double\",\"date\",\"string\" ] }, \"comparisonType\": { \"type\": \"string\", \"enum\": [ \"=\", \">\", \">=\", \"<\", \"<=\", \"\u2260\" ] }, \"compareTo\": { \"type\": \"any\" } }, \"required\": [ \"attributeName\", \"comparisonType\", \"compareTo\",\"attributeType\" ] }, \"additionalMetadata\": { \"userFriendlyName\": \"Comparison\", \"operatorDescription\": \"Select data based on a condition (>, <, =, ..)\", \"operatorGroupName\": \"Utilities\", \"numInputPorts\": 1, \"numOutputPorts\": 1, \"advancedOptions\": [] } }, { \"operatorType\": \"Aggregation\", \"jsonSchema\": { \"type\": \"object\", \"id\": \"urn:jsonschema:edu:uci:ics:texera:dataflow:aggregator:AggregatorPredicate\", \"properties\": { \"listOfAggregations\": { \"type\": \"array\", \"items\": { \"type\": \"object\", \"id\": \"urn:jsonschema:edu:uci:ics:texera:dataflow:aggregator:AggregationAttributeAndResult\", \"properties\": { \"attribute\": { \"type\": \"string\" }, \"aggregator\": { \"type\": \"string\", \"enum\": [ \"min\", \"max\", \"average\", \"sum\", \"count\" ] }, \"resultAttribute\": { \"type\": \"string\" } } } } }, \"required\": [ \"listOfAggregations\" ] }, \"additionalMetadata\": { \"userFriendlyName\": \"Aggregation\", \"operatorDescription\": \"Aggregate one or more columns to find min, max, sum, average, count of the column\", \"operatorGroupName\": \"Utilities\", \"numInputPorts\": 1, \"numOutputPorts\": 1, \"advancedOptions\": [] } }, { \"operatorType\": \"KeywordMatcher\", \"jsonSchema\": { \"type\": \"object\", \"id\": \"urn:jsonschema:edu:uci:ics:texera:dataflow:keywordmatcher:KeywordPredicate\", \"properties\": { \"attributeName\": { \"type\": \"string\" }, \"keyword\":{\"type\":\"string\"} }, \"required\": [ \"attributeName\", \"keyword\" ] }, \"additionalMetadata\": { \"userFriendlyName\": \"Keyword Search\", \"operatorDescription\": \"Search the documents using a keyword\", \"operatorGroupName\": \"Search\", \"numInputPorts\": 1, \"numOutputPorts\": 1, \"advancedOptions\": [] } },{\"operatorType\": \"CrossRippleJoin\",\"jsonSchema\": { \"type\": \"object\", \"id\": \"urn:jsonschema:edu:uci:ics:texera:dataflow:join:crossjoin\", \"properties\": {\"batchingLimit\": { \"type\": \"string\" } }, \"required\": [] }, \"additionalMetadata\": { \"userFriendlyName\": \"Cross Join\", \"operatorDescription\": \"Produce the Cartesian Product of two sources\", \"operatorGroupName\": \"Join\", \"numInputPorts\": 2, \"numOutputPorts\": 1, \"advancedOptions\": [] }},{\"operatorType\": \"HashRippleJoin\",\"jsonSchema\": { \"type\": \"object\", \"id\": \"urn:jsonschema:edu:uci:ics:texera:dataflow:join:fulljoin\", \"properties\": { \"innerTableAttribute\": { \"type\": \"string\" },\"outerTableAttribute\": { \"type\": \"string\" }}, \"required\": [\"innerTableAttribute\",\"outerTableAttribute\"] }, \"additionalMetadata\": { \"userFriendlyName\": \"Ripple Full Join\", \"operatorDescription\": \"Do full join on two scources based on one condition\", \"operatorGroupName\": \"Join\", \"numInputPorts\": 2, \"numOutputPorts\": 1, \"advancedOptions\": [] }},{\"operatorType\": \"InsertionSort\",\"jsonSchema\": { \"type\": \"object\", \"id\": \"urn:jsonschema:edu:uci:ics:texera:dataflow:sort:insertionsort\", \"properties\": { \"attributeName\": { \"type\": \"string\" },\"attributeType\": { \"type\": \"string\",\"enum\": [ \"int\",\"double\",\"date\",\"string\" ] }}, \"required\": [\"attributeName\",\"attributeType\"] }, \"additionalMetadata\": { \"userFriendlyName\": \"Sort\", \"operatorDescription\": \"Insertion Sort\", \"operatorGroupName\": \"Sort\", \"numInputPorts\": 1, \"numOutputPorts\": 1, \"advancedOptions\": [] }},{\"operatorType\": \"GroupBy\",\"jsonSchema\": { \"type\": \"object\", \"id\": \"urn:jsonschema:edu:uci:ics:texera:dataflow:groupby\", \"properties\": { \"groupByAttribute\": { \"type\": \"string\" },\"aggregationAttribute\":{ \"type\": \"string\" },\"aggregationFunction\":{ \"type\": \"string\", \"enum\": [ \"max\",\"min\",\"avg\",\"count\",\"sum\" ] }}, \"required\": [\"groupByAttribute\",\"aggregationAttribute\",\"aggregationFunction\"] }, \"additionalMetadata\": { \"userFriendlyName\": \"GroupBy\", \"operatorDescription\": \"GroupBy\", \"operatorGroupName\": \"Utilities\", \"numInputPorts\": 1, \"numOutputPorts\": 1, \"advancedOptions\": [] }},{\"operatorType\": \"Projection\",\"jsonSchema\": { \"type\": \"object\", \"id\": \"urn:jsonschema:edu:uci:ics:texera:dataflow:projection\", \"properties\": { \"projectionAttributes\": { \"type\": \"string\" }}, \"required\": [\"projectionAttributes\"] }, \"additionalMetadata\": { \"userFriendlyName\": \"Projection\", \"operatorDescription\": \"Projection\", \"operatorGroupName\": \"Utilities\", \"numInputPorts\": 1, \"numOutputPorts\": 1, \"advancedOptions\": [] }},{\"operatorType\": \"HashJoin\",\"jsonSchema\": { \"type\": \"object\", \"id\": \"urn:jsonschema:edu:uci:ics:texera:dataflow:join:fulljoin\", \"properties\": { \"innerTableAttribute\": { \"type\": \"string\" },\"outerTableAttribute\": { \"type\": \"string\" }}, \"required\": [\"innerTableAttribute\",\"outerTableAttribute\"] }, \"additionalMetadata\": { \"userFriendlyName\": \"Hash Full Join\", \"operatorDescription\": \"Do full join on two scources based on one condition\", \"operatorGroupName\": \"Join\", \"numInputPorts\": 2, \"numOutputPorts\": 1, \"advancedOptions\": [] }},{\"operatorType\": \"SentimentAnalysis\",\"jsonSchema\": { \"type\": \"object\", \"id\": \"urn:jsonschema:edu:uci:ics:texera:dataflow:ML:sentimentanalysis\", \"properties\": { \"targetAttribute\": { \"type\": \"string\" },}, \"required\": [\"targetAttribute\"] }, \"additionalMetadata\": { \"userFriendlyName\": \"Sentiment Analysis\", \"operatorDescription\": \"Do sentiment analysis on target attribute\", \"operatorGroupName\": \"Utilities\", \"numInputPorts\": 1, \"numOutputPorts\": 1, \"advancedOptions\": [] }} ], \"groups\": [ { \"groupName\": \"Source\", \"groupOrder\": 0 }, { \"groupName\": \"Search\", \"groupOrder\": 1 },{ \"groupName\": \"Join\", \"groupOrder\": 2 },{ \"groupName\": \"Sort\", \"groupOrder\": 3 },{ \"groupName\": \"Utilities\", \"groupOrder\": 4} ] }";
            JObject json = JObject.Parse(ret);
            return Json(json);
        }
    }
}
